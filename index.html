<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>UK Budget Command Console – Budget Benchmark</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="styles.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="command-ui">
  <header class="command-header">
    <div>
      <p class="eyebrow">Budget Launch Console</p>
      <h1>UK Budget Command</h1>
      <p class="lede">Dial in fiscal and structural choices, then fire the simulation to see how your term plays out.</p>
    </div>
    <div class="status-ribbon">
      <div class="status-chip">
        <label for="horizon_years">Horizon</label>
        <select id="horizon_years">
          <option value="1">1 year</option>
          <option value="3">3 years</option>
          <option value="5" selected>5 years (full term)</option>
        </select>
      </div>
      <div class="status-chip">
        <label for="shocks_enabled">External shocks</label>
        <input type="checkbox" id="shocks_enabled" checked>
      </div>
    </div>
  </header>

  <main class="command-grid">
    <section class="controls-stack">
      <div class="console-card">
        <div class="card-heading">
          <div>
            <p class="eyebrow">Module 1</p>
            <h2>Revenue Arsenal</h2>
            <p class="microcopy">Aim taxes at the economy. All sliders sync with the numeric pads.</p>
          </div>
          <div class="accent-bar"></div>
        </div>
        <div class="field-grid">
          <div class="field-block">
            <h3>Income tax payload</h3>
            <div class="field-row">
              <label for="income_basic_rate">Basic rate (%)</label>
              <div class="field-inputs">
                <input type="range" id="income_basic_rate" min="10" max="30" step="1">
                <input type="number" id="income_basic_rate_num" min="10" max="30" step="1">
              </div>
            </div>
            <div class="field-row">
              <label for="income_higher_rate">Higher rate (%)</label>
              <div class="field-inputs">
                <input type="range" id="income_higher_rate" min="30" max="55" step="1">
                <input type="number" id="income_higher_rate_num" min="30" max="55" step="1">
              </div>
            </div>
            <div class="field-row">
              <label for="income_additional_rate">Additional rate (%)</label>
              <div class="field-inputs">
                <input type="range" id="income_additional_rate" min="35" max="60" step="1">
                <input type="number" id="income_additional_rate_num" min="35" max="60" step="1">
              </div>
            </div>
          </div>
          <div class="field-block">
            <h3>Corporate & consumption</h3>
            <div class="field-row">
              <label for="corp_rate">Corporation tax (%)</label>
              <div class="field-inputs">
                <input type="range" id="corp_rate" min="15" max="35" step="1">
                <input type="number" id="corp_rate_num" min="15" max="35" step="1">
              </div>
            </div>
            <div class="field-row">
              <label for="vat_rate">VAT standard rate (%)</label>
              <div class="field-inputs">
                <input type="range" id="vat_rate" min="10" max="25" step="1">
                <input type="number" id="vat_rate_num" min="10" max="25" step="1">
              </div>
            </div>
            <div class="field-row">
              <label for="nic_change">National Insurance (% change)</label>
              <div class="field-inputs">
                <input type="range" id="nic_change" min="-20" max="20" step="1">
                <input type="number" id="nic_change_num" min="-20" max="20" step="1">
              </div>
            </div>
            <div class="field-row">
              <label for="cgt_change">Capital gains (% change)</label>
              <div class="field-inputs">
                <input type="range" id="cgt_change" min="-40" max="40" step="5">
                <input type="number" id="cgt_change_num" min="-40" max="40" step="5">
              </div>
            </div>
          </div>
          <div class="field-block">
            <h3>Wealth & indirect</h3>
            <div class="field-row">
              <label for="iht_change">Inheritance (% change)</label>
              <div class="field-inputs">
                <input type="range" id="iht_change" min="-40" max="40" step="5">
                <input type="number" id="iht_change_num" min="-40" max="40" step="5">
              </div>
            </div>
            <div class="field-row">
              <label for="wealth_tax_rate">Wealth tax (% on fortunes)</label>
              <div class="field-inputs">
                <input type="range" id="wealth_tax_rate" min="0" max="3" step="0.1">
                <input type="number" id="wealth_tax_rate_num" min="0" max="3" step="0.1">
              </div>
            </div>
            <div class="field-row">
              <label for="fuel_duty_change">Fuel duties (% change)</label>
              <div class="field-inputs">
                <input type="range" id="fuel_duty_change" min="-50" max="50" step="5">
                <input type="number" id="fuel_duty_change_num" min="-50" max="50" step="5">
              </div>
            </div>
            <div class="field-row">
              <label for="alcohol_duty_change">Alcohol & tobacco (% change)</label>
              <div class="field-inputs">
                <input type="range" id="alcohol_duty_change" min="-50" max="50" step="5">
                <input type="number" id="alcohol_duty_change_num" min="-50" max="50" step="5">
              </div>
            </div>
            <div class="field-row">
              <label for="stamp_duty_change">Stamp duty (% change)</label>
              <div class="field-inputs">
                <input type="range" id="stamp_duty_change" min="-50" max="50" step="5">
                <input type="number" id="stamp_duty_change_num" min="-50" max="50" step="5">
              </div>
            </div>
            <div class="field-row">
              <label for="council_tax_change">Council tax (% change)</label>
              <div class="field-inputs">
                <input type="range" id="council_tax_change" min="-20" max="40" step="5">
                <input type="number" id="council_tax_change_num" min="-20" max="40" step="5">
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="console-card">
        <div class="card-heading">
          <div>
            <p class="eyebrow">Module 2</p>
            <h2>Spending Payload</h2>
            <p class="microcopy">Push more thrust into services or trim mass for lighter debt.</p>
          </div>
          <div class="accent-bar"></div>
        </div>
        <div class="field-grid">
          <div class="field-block">
            <h3>Core services (% vs baseline)</h3>
            <div class="field-row">
              <label for="health_spend_change">Health / NHS</label>
              <div class="field-inputs">
                <input type="range" id="health_spend_change" min="-10" max="30" step="2">
                <input type="number" id="health_spend_change_num" min="-10" max="30" step="2">
              </div>
            </div>
            <div class="field-row">
              <label for="education_spend_change">Education</label>
              <div class="field-inputs">
                <input type="range" id="education_spend_change" min="-10" max="25" step="2">
                <input type="number" id="education_spend_change_num" min="-10" max="25" step="2">
              </div>
            </div>
            <div class="field-row">
              <label for="defence_spend_change">Defence</label>
              <div class="field-inputs">
                <input type="range" id="defence_spend_change" min="-10" max="30" step="2">
                <input type="number" id="defence_spend_change_num" min="-10" max="30" step="2">
              </div>
            </div>
            <div class="field-row">
              <label for="pensions_spend_change">Pensions</label>
              <div class="field-inputs">
                <input type="range" id="pensions_spend_change" min="-10" max="20" step="2">
                <input type="number" id="pensions_spend_change_num" min="-10" max="20" step="2">
              </div>
            </div>
            <div class="field-row">
              <label for="welfare_spend_change">Working-age welfare</label>
              <div class="field-inputs">
                <input type="range" id="welfare_spend_change" min="-20" max="30" step="2">
                <input type="number" id="welfare_spend_change_num" min="-20" max="30" step="2">
              </div>
            </div>
          </div>
          <div class="field-block">
            <h3>Growth & climate (% vs baseline)</h3>
            <div class="field-row">
              <label for="transport_spend_change">Transport</label>
              <div class="field-inputs">
                <input type="range" id="transport_spend_change" min="-20" max="40" step="2">
                <input type="number" id="transport_spend_change_num" min="-20" max="40" step="2">
              </div>
            </div>
            <div class="field-row">
              <label for="housing_spend_change">Housing & planning</label>
              <div class="field-inputs">
                <input type="range" id="housing_spend_change" min="-20" max="40" step="2">
                <input type="number" id="housing_spend_change_num" min="-20" max="40" step="2">
              </div>
            </div>
            <div class="field-row">
              <label for="environment_spend_change">Environment & climate</label>
              <div class="field-inputs">
                <input type="range" id="environment_spend_change" min="-20" max="60" step="2">
                <input type="number" id="environment_spend_change_num" min="-20" max="60" step="2">
              </div>
            </div>
            <div class="field-row">
              <label for="infrastructure_spend_change">Infrastructure</label>
              <div class="field-inputs">
                <input type="range" id="infrastructure_spend_change" min="-20" max="60" step="2">
                <input type="number" id="infrastructure_spend_change_num" min="-20" max="60" step="2">
              </div>
            </div>
            <div class="field-row">
              <label for="foreign_aid_spend_change">Foreign aid</label>
              <div class="field-inputs">
                <input type="range" id="foreign_aid_spend_change" min="-50" max="50" step="5">
                <input type="number" id="foreign_aid_spend_change_num" min="-50" max="50" step="5">
              </div>
            </div>
          </div>
          <div class="field-block">
            <h3>Borrowing discipline</h3>
            <div class="field-row">
              <label for="target_deficit">Deficit target (% of GDP)</label>
              <div class="field-inputs">
                <input type="range" id="target_deficit" min="-1" max="8" step="0.5">
                <input type="number" id="target_deficit_num" min="-1" max="8" step="0.5">
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="console-card">
        <div class="card-heading">
          <div>
            <p class="eyebrow">Module 3</p>
            <h2>Systems & Protocols</h2>
            <p class="microcopy">Labour, trade, and climate toggles that shape long-run thrust.</p>
          </div>
          <div class="accent-bar"></div>
        </div>
        <div class="field-grid">
          <div class="field-block">
            <h3>Labour & business</h3>
            <div class="field-row">
              <label for="min_wage_change">Minimum wage (% change)</label>
              <div class="field-inputs">
                <input type="range" id="min_wage_change" min="-10" max="40" step="2">
                <input type="number" id="min_wage_change_num" min="-10" max="40" step="2">
              </div>
            </div>
            <div class="field-row">
              <label for="immigration_level">Net migration stance (0-100)</label>
              <div class="field-inputs">
                <input type="range" id="immigration_level" min="0" max="100" step="5">
                <input type="number" id="immigration_level_num" min="0" max="100" step="5">
              </div>
            </div>
            <div class="field-row">
              <label for="business_incentives">Business incentives</label>
              <div class="field-inputs">
                <input type="range" id="business_incentives" min="0" max="100" step="5">
                <input type="number" id="business_incentives_num" min="0" max="100" step="5">
              </div>
            </div>
            <div class="field-row">
              <label for="trade_openness">Trade openness / tariffs</label>
              <div class="field-inputs">
                <input type="range" id="trade_openness" min="0" max="100" step="5">
                <input type="number" id="trade_openness_num" min="0" max="100" step="5">
              </div>
            </div>
          </div>
          <div class="field-block">
            <h3>Climate & regulation</h3>
            <div class="field-row">
              <label for="carbon_tax_level">Carbon tax / green levies</label>
              <div class="field-inputs">
                <input type="range" id="carbon_tax_level" min="0" max="100" step="5">
                <input type="number" id="carbon_tax_level_num" min="0" max="100" step="5">
              </div>
            </div>
            <div class="field-row">
              <label for="regulation_burden">Regulatory burden (0-100)</label>
              <div class="field-inputs">
                <input type="range" id="regulation_burden" min="0" max="100" step="5">
                <input type="number" id="regulation_burden_num" min="0" max="100" step="5">
              </div>
            </div>
            <div class="field-row">
              <label for="shock_intensity">Global shock intensity</label>
              <div class="field-inputs">
                <input type="range" id="shock_intensity" min="0" max="100" step="5">
                <input type="number" id="shock_intensity_num" min="0" max="100" step="5">
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="fire-control">
        <div>
          <p class="eyebrow">Launch control</p>
          <h3>Ready to fire the simulation?</h3>
          <p class="microcopy">Lock in your settings, then press the illuminated button to run the term.</p>
        </div>
        <button id="run_simulation" class="cta-button">RUN SIMULATION</button>
      </div>
    </section>

    <section class="telemetry-stack">
      <div class="glow-panel">
        <div class="telemetry-grid">
          <div class="telemetry-card">
            <h3>Macro snapshot</h3>
            <p class="metric">Real GDP growth: <span id="gdp_growth_outcome">–</span></p>
            <p class="metric">Unemployment: <span id="unemployment_outcome">–</span></p>
            <p class="metric">Inflation (CPI): <span id="inflation_outcome">–</span></p>
          </div>
          <div class="telemetry-card">
            <h3>Public finances</h3>
            <p class="metric">Deficit: <span id="deficit_outcome">–</span> of GDP</p>
            <p class="metric">Debt: <span id="debt_outcome">–</span> of GDP</p>
            <p class="metric-sub">End of horizon GDP: <span id="gdp_level_outcome">–</span></p>
          </div>
          <div class="telemetry-card">
            <h3>Society & climate</h3>
            <p class="metric">Poverty rate: <span id="poverty_outcome">–</span></p>
            <p class="metric">Inequality (Gini): <span id="gini_outcome">–</span></p>
            <p class="metric">CO₂ vs baseline: <span id="emissions_outcome">–</span></p>
          </div>
        </div>
      </div>

      <div class="chart-wall">
        <div class="chart-card">
          <div class="chart-heading">
            <h3>Trajectory: GDP & unemployment</h3>
            <span class="chart-chip">Time-series</span>
          </div>
          <canvas id="macro_chart" aria-label="GDP and unemployment over time"></canvas>
          <p class="chart-caption">Solid lines show your scenario. Toggle horizon to change run length.</p>
        </div>
        <div class="chart-card">
          <div class="chart-heading">
            <h3>Deficit & debt vs GDP</h3>
            <span class="chart-chip">Fiscal</span>
          </div>
          <canvas id="fiscal_chart" aria-label="Deficit and debt compared to GDP"></canvas>
        </div>
        <div class="chart-card">
          <div class="chart-heading">
            <h3>Annual spend allocation</h3>
            <span class="chart-chip">Breakdown</span>
          </div>
          <canvas id="spend_chart" aria-label="Spending allocation by department"></canvas>
        </div>
      </div>

      <div class="glow-panel text-panel">
        <div class="panel-header">
          <h3>Mission brief</h3>
          <span class="chart-chip">Auto-generated</span>
        </div>
        <p id="text_summary">Adjust any slider and fire the simulation to generate the narrative.</p>
      </div>

      <details class="glow-panel" id="advanced_block">
        <summary>Advanced telemetry (health, housing, business, risk)</summary>
        <section class="advanced-grid">
          <div>
            <h4>Business & investment</h4>
            <ul>
              <li>Business formation index: <span id="business_formation_outcome">–</span></li>
              <li>FDI index: <span id="fdi_outcome">–</span></li>
              <li>Startup ecosystem: <span id="startup_outcome">–</span></li>
              <li>Non-dom net flow: <span id="nondom_outcome">–</span></li>
            </ul>
          </div>
          <div>
            <h4>Health & education</h4>
            <ul>
              <li>NHS waiting time index: <span id="nhs_wait_outcome">–</span></li>
              <li>Life expectancy (years): <span id="life_expectancy_outcome">–</span></li>
              <li>School performance index: <span id="school_perf_outcome">–</span></li>
              <li>Apprenticeship index: <span id="apprentice_outcome">–</span></li>
            </ul>
          </div>
          <div>
            <h4>Housing & cost of living</h4>
            <ul>
              <li>House price growth: <span id="house_price_outcome">–</span></li>
              <li>Rent affordability: <span id="rent_afford_outcome">–</span></li>
              <li>Housing supply index: <span id="housing_supply_outcome">–</span></li>
              <li>Fuel poverty rate: <span id="fuel_poverty_outcome">–</span></li>
            </ul>
          </div>
          <div>
            <h4>Social & inequality</h4>
            <ul>
              <li>Homelessness index: <span id="homeless_outcome">–</span></li>
              <li>Food bank usage index: <span id="foodbank_outcome">–</span></li>
              <li>Public unrest risk: <span id="unrest_outcome">–</span></li>
              <li>Brain drain risk: <span id="brain_drain_outcome">–</span></li>
            </ul>
          </div>
          <div>
            <h4>Environment & energy</h4>
            <ul>
              <li>Renewables share: <span id="renewables_outcome">–</span></li>
              <li>Energy price index: <span id="energy_price_outcome">–</span></li>
              <li>Air quality index: <span id="air_quality_outcome">–</span></li>
            </ul>
          </div>
          <div>
            <h4>International & tourism</h4>
            <ul>
              <li>Trade balance (% of GDP): <span id="trade_balance_outcome">–</span></li>
              <li>Tourism flows index: <span id="tourism_outcome">–</span></li>
              <li>Random event this term: <span id="shock_short">–</span></li>
            </ul>
          </div>
        </section>
      </details>

      <section class="utility-row">
        <button id="export_csv">Download telemetry (CSV)</button>
        <button id="print_pdf">Print / Save as PDF</button>
      </section>

      <section class="assumptions">
        <h3>Model assumptions & limitations</h3>
        <p>
          Defaults are based on a stylised UK 2024–25 baseline (GDP, tax take, spending, and debt levels). The simulation
          is a hand-built macro-fiscal model: no AI, no machine learning. All behaviour comes from multipliers, elasticities,
          and rules defined in <code>config.js</code> and pure math in <code>engine.js</code>. It’s designed for learning,
          not for official forecasting.
        </p>
      </section>
    </section>
  </main>

  <footer class="command-footer">
    <p>Open-source demo for the Budget Benchmark challenge. Futuristic console interface.</p>
  </footer>

  <script type="module" src="app.js"></script>
</body>
</html>
