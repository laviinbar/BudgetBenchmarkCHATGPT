<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>UK Budget Simulator – Budget Benchmark</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="styles.css">
  <!-- Chart.js for charts -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
<header>
  <div class="header-top">
    <h1>UK National Budget Simulator</h1>
    <p>Step 1: Build your budget. Step 2: See what happens to the economy.</p>
  </div>
  <div class="step-indicator">
    <span id="step1_badge" class="step-badge active">1. Build budget</span>
    <span id="step2_badge" class="step-badge">2. See impact</span>
  </div>
</header>

<main>
  <!-- ============ PAGE 1: BUILDER ============ -->
  <section id="controls" class="page">
    <h2>Step 1 – Choose your budget</h2>
    <p class="page-intro">
      Use the sliders below to tweak taxes, spending and policies. When you’re ready, click
      <strong>Run Simulation</strong> to jump to a clean results page with simple graphs.
    </p>

    <div class="controls-grid">
      <!-- TAX BLOCK -->
      <section class="control-panel">
        <h3>Taxation</h3>

        <fieldset>
          <legend>
            Income Tax Rates by Bracket
            <span class="help" title="Simplified UK income tax brackets. Changes affect income tax revenue and work incentives.">?</span>
          </legend>
          <div class="field-row">
            <label for="income_basic_rate">Basic rate (%)</label>
            <input type="range" id="income_basic_rate" min="10" max="30" value="20">
            <input type="number" id="income_basic_rate_num" min="10" max="30" value="20">
          </div>
          <div class="field-row">
            <label for="income_higher_rate">Higher rate (%)</label>
            <input type="range" id="income_higher_rate" min="30" max="55" value="40">
            <input type="number" id="income_higher_rate_num" min="30" max="55" value="40">
          </div>
          <div class="field-row">
            <label for="income_additional_rate">Additional rate (%)</label>
            <input type="range" id="income_additional_rate" min="35" max="60" value="45">
            <input type="number" id="income_additional_rate_num" min="35" max="60" value="45">
          </div>
        </fieldset>

        <fieldset>
          <legend>Headline Tax Rates</legend>
          <div class="field-row">
            <label for="corp_rate">Corporation tax (%)</label>
            <input type="range" id="corp_rate" min="15" max="35" value="25">
            <input type="number" id="corp_rate_num" min="15" max="35" value="25">
          </div>
          <div class="field-row">
            <label for="vat_rate">VAT standard rate (%)</label>
            <input type="range" id="vat_rate" min="10" max="25" value="20">
            <input type="number" id="vat_rate_num" min="10" max="25" value="20">
          </div>
          <div class="field-row">
            <label for="nic_change">% change in NICs</label>
            <input type="range" id="nic_change" min="-20" max="20" value="0">
            <input type="number" id="nic_change_num" min="-20" max="20" value="0">
          </div>
          <div class="field-row">
            <label for="cgt_change">% change in capital gains tax</label>
            <input type="range" id="cgt_change" min="-40" max="40" value="0">
            <input type="number" id="cgt_change_num" min="-40" max="40" value="0">
          </div>
          <div class="field-row">
            <label for="iht_change">% change in inheritance tax</label>
            <input type="range" id="iht_change" min="-40" max="40" value="0">
            <input type="number" id="iht_change_num" min="-40" max="40" value="0">
          </div>
          <div class="field-row">
            <label for="fuel_duty_change">% change in fuel duties</label>
            <input type="range" id="fuel_duty_change" min="-50" max="50" value="0">
            <input type="number" id="fuel_duty_change_num" min="-50" max="50" value="0">
          </div>
          <div class="field-row">
            <label for="alcohol_duty_change">% change in alcohol/tobacco duties</label>
            <input type="range" id="alcohol_duty_change" min="-50" max="50" value="0">
            <input type="number" id="alcohol_duty_change_num" min="-50" max="50" value="0">
          </div>
          <div class="field-row">
            <label for="stamp_duty_change">% change in stamp duty</label>
            <input type="range" id="stamp_duty_change" min="-50" max="50" value="0">
            <input type="number" id="stamp_duty_change_num" min="-50" max="50" value="0">
          </div>
          <div class="field-row">
            <label for="council_tax_change">% change in council tax bands</label>
            <input type="range" id="council_tax_change" min="-20" max="40" value="0">
            <input type="number" id="council_tax_change_num" min="-20" max="40" value="0">
          </div>
          <div class="field-row">
            <label for="wealth_tax_rate">Wealth tax (% on big fortunes)</label>
            <input type="range" id="wealth_tax_rate" min="0" max="3" value="0" step="0.1">
            <input type="number" id="wealth_tax_rate_num" min="0" max="3" value="0" step="0.1">
          </div>
        </fieldset>
      </section>

      <!-- SPENDING BLOCK -->
      <section class="control-panel">
        <h3>Government Spending</h3>
        <p class="panel-note">Adjust spending compared with a realistic baseline.</p>

        <fieldset>
          <legend>Major Departments (% change vs baseline)</legend>
          <div class="field-row">
            <label for="health_spend_change">Health / NHS</label>
            <input type="range" id="health_spend_change" min="-10" max="30" value="0">
            <input type="number" id="health_spend_change_num" min="-10" max="30" value="0">
          </div>
          <div class="field-row">
            <label for="education_spend_change">Education</label>
            <input type="range" id="education_spend_change" min="-10" max="25" value="0">
            <input type="number" id="education_spend_change_num" min="-10" max="25" value="0">
          </div>
          <div class="field-row">
            <label for="defence_spend_change">Defence</label>
            <input type="range" id="defence_spend_change" min="-10" max="30" value="0">
            <input type="number" id="defence_spend_change_num" min="-10" max="30" value="0">
          </div>
          <div class="field-row">
            <label for="pensions_spend_change">Pensions</label>
            <input type="range" id="pensions_spend_change" min="-10" max="20" value="0">
            <input type="number" id="pensions_spend_change_num" min="-10" max="20" value="0">
          </div>
          <div class="field-row">
            <label for="welfare_spend_change">Working-age welfare</label>
            <input type="range" id="welfare_spend_change" min="-20" max="30" value="0">
            <input type="number" id="welfare_spend_change_num" min="-20" max="30" value="0">
          </div>
          <div class="field-row">
            <label for="transport_spend_change">Transport</label>
            <input type="range" id="transport_spend_change" min="-20" max="40" value="0">
            <input type="number" id="transport_spend_change_num" min="-20" max="40" value="0">
          </div>
          <div class="field-row">
            <label for="housing_spend_change">Housing & planning</label>
            <input type="range" id="housing_spend_change" min="-20" max="40" value="0">
            <input type="number" id="housing_spend_change_num" min="-20" max="40" value="0">
          </div>
          <div class="field-row">
            <label for="environment_spend_change">Environment & climate</label>
            <input type="range" id="environment_spend_change" min="-20" max="60" value="0">
            <input type="number" id="environment_spend_change_num" min="-20" max="60" value="0">
          </div>
          <div class="field-row">
            <label for="foreign_aid_spend_change">Foreign aid</label>
            <input type="range" id="foreign_aid_spend_change" min="-50" max="50" value="0">
            <input type="number" id="foreign_aid_spend_change_num" min="-50" max="50" value="0">
          </div>
          <div class="field-row">
            <label for="infrastructure_spend_change">Capital infrastructure</label>
            <input type="range" id="infrastructure_spend_change" min="-20" max="60" value="0">
            <input type="number" id="infrastructure_spend_change_num" min="-20" max="60" value="0">
          </div>
        </fieldset>

        <fieldset>
          <legend>Borrowing & Deficit</legend>
          <div class="field-row">
            <label for="target_deficit">% of GDP target for deficit</label>
            <input type="range" id="target_deficit" min="-1" max="8" value="5" step="0.5">
            <input type="number" id="target_deficit_num" min="-1" max="8" value="5" step="0.5">
          </div>
          <p class="hint">
            The model adjusts some “other” spending so your deficit moves towards this target.
          </p>
        </fieldset>
      </section>

      <!-- OTHER POLICY BLOCK -->
      <section class="control-panel">
        <h3>Other Policies</h3>
        <fieldset>
          <legend>Labour Market & Social Policy</legend>
          <div class="field-row">
            <label for="min_wage_change">Minimum wage (% change)</label>
            <input type="range" id="min_wage_change" min="-10" max="40" value="0">
            <input type="number" id="min_wage_change_num" min="-10" max="40" value="0">
          </div>
          <div class="field-row">
            <label for="immigration_level">
              Net migration stance
              <span class="help" title="0 = very tight controls; 100 = very open. Affects labour supply and growth.">?</span>
            </label>
            <input type="range" id="immigration_level" min="0" max="100" value="60">
            <input type="number" id="immigration_level_num" min="0" max="100" value="60">
          </div>
          <div class="field-row">
            <label for="business_incentives">
              Business incentives
              <span class="help" title="Higher = more tax breaks for startups, R&D etc. Boosts investment but cuts receipts.">?</span>
            </label>
            <input type="range" id="business_incentives" min="0" max="100" value="50">
            <input type="number" id="business_incentives_num" min="0" max="100" value="50">
          </div>
          <div class="field-row">
            <label for="trade_openness">
              Trade openness / tariffs
            </label>
            <input type="range" id="trade_openness" min="0" max="100" value="50">
            <input type="number" id="trade_openness_num" min="0" max="100" value="50">
          </div>
        </fieldset>

        <fieldset>
          <legend>Environment & Regulation</legend>
          <div class="field-row">
            <label for="carbon_tax_level">
              Carbon tax / green levies
            </label>
            <input type="range" id="carbon_tax_level" min="0" max="100" value="30">
            <input type="number" id="carbon_tax_level_num" min="0" max="100" value="30">
          </div>
          <div class="field-row">
            <label for="regulation_burden">
              Regulatory burden
              <span class="help" title="How strict environmental and labour regulations feel to businesses.">?</span>
            </label>
            <input type="range" id="regulation_burden" min="0" max="100" value="50">
            <input type="number" id="regulation_burden_num" min="0" max="100" value="50">
          </div>
        </fieldset>

        <fieldset>
          <legend>Random Events & Risk</legend>
          <div class="field-row">
            <label for="shock_intensity">
              Shock intensity
            </label>
            <input type="range" id="shock_intensity" min="0" max="100" value="30">
            <input type="number" id="shock_intensity_num" min="0" max="100" value="30">
          </div>
          <p class="hint">
            Higher values mean a bigger chance of things like oil price spikes, mini-recessions or tech booms.
          </p>
        </fieldset>
      </section>
    </div>

    <div class="actions">
      <div class="scenario-controls">
        <label for="scenario_name">Scenario name</label>
        <input type="text" id="scenario_name" placeholder="e.g. Green Growth Budget">
        <button id="save_scenario">Save</button>
        <label for="load_scenario_select">Saved scenarios</label>
        <select id="load_scenario_select">
          <option value="">-- none --</option>
        </select>
        <button id="load_scenario">Load</button>
        <button id="compare_scenario">Use as comparison</button>
      </div>

      <div class="run-controls">
        <button id="run_simulation" class="primary">Run Simulation →</button>
        <button id="reset_defaults">Reset</button>
      </div>
    </div>
  </section>

  <!-- ============ PAGE 2: RESULTS ============ -->
  <section id="results" class="page hidden">
    <div class="results-header-row">
      <button id="back_to_builder" class="ghost">&larr; Back to budget</button>
      <h2>Step 2 – Impact of your budget</h2>
    </div>
    <p class="page-intro">
      Here’s what happens over the next 12 months based on your choices. The top line cards and graphs are meant to be
      super simple to read. You can open the advanced section if you want all the detail.
    </p>

    <div id="summary-cards">
      <div class="card big">
        <h3>Economy</h3>
        <p class="metric">GDP growth: <span id="gdp_growth_outcome">–</span></p>
        <p class="metric">Unemployment: <span id="unemployment_outcome">–</span></p>
        <p class="metric-sub">GDP after 12 months: <span id="gdp_level_outcome">–</span></p>
      </div>
      <div class="card big">
        <h3>Cost of Living</h3>
        <p class="metric">Inflation (CPI): <span id="inflation_outcome">–</span></p>
        <p class="metric">Base interest rate: <span id="rate_outcome">–</span></p>
        <p class="metric-sub">House price growth: <span id="house_price_outcome">–</span></p>
      </div>
      <div class="card big">
        <h3>Public Finances</h3>
        <p class="metric">Deficit: <span id="deficit_outcome">–</span> of GDP</p>
        <p class="metric">Debt: <span id="debt_outcome">–</span> of GDP</p>
        <p class="metric-sub">Shock this year: <span id="shock_short">–</span></p>
      </div>
    </div>

    <div class="charts-grid simple-charts">
      <div class="chart-card">
        <h3>GDP & Unemployment (next 12 months)</h3>
        <canvas id="macro_chart" aria-label="GDP and unemployment over time"></canvas>
        <p class="chart-caption">
          Line up = growing economy. Line down = shrinking. Unemployment is shown as a % of the workforce.
        </p>
      </div>
      <div class="chart-card">
        <h3>Deficit & Debt vs GDP</h3>
        <canvas id="fiscal_chart" aria-label="Deficit and debt compared to GDP"></canvas>
        <p class="chart-caption">
          Shows your deficit target vs actual, and how debt compares with the size of the economy.
        </p>
      </div>
      <div class="chart-card">
        <h3>Where the Money Goes</h3>
        <canvas id="spend_chart" aria-label="Spending allocation by department"></canvas>
        <p class="chart-caption">
          Bigger bars = more money. This is annual spending in £ billions by department.
        </p>
      </div>
    </div>

    <div class="text-report">
      <h3>Short narrative summary</h3>
      <p id="text_summary">
        Adjust the controls and click “Run Simulation” to see a narrative in plain English.
      </p>
    </div>

    <details id="advanced_block">
      <summary>Show advanced breakdown (inequality, NHS, housing, climate...)</summary>
      <section id="detailed-indicators">
        <h3>Advanced Indicators</h3>
        <div class="indicator-grid">
          <div>
            <h4>Business & Investment</h4>
            <ul>
              <li>Net business formation: <span id="business_formation_outcome">–</span></li>
              <li>FDI index: <span id="fdi_outcome">–</span></li>
              <li>Startup ecosystem health: <span id="startup_outcome">–</span></li>
              <li>Non-dom net flow: <span id="nondom_outcome">–</span></li>
            </ul>
          </div>
          <div>
            <h4>Social & Inequality</h4>
            <ul>
              <li>Poverty rate: <span id="poverty_outcome">–</span></li>
              <li>Gini coefficient: <span id="gini_outcome">–</span></li>
              <li>Homelessness index: <span id="homeless_outcome">–</span></li>
              <li>Food bank usage index: <span id="foodbank_outcome">–</span></li>
            </ul>
          </div>
          <div>
            <h4>Health & Education</h4>
            <ul>
              <li>NHS waiting time index: <span id="nhs_wait_outcome">–</span></li>
              <li>Life expectancy (years): <span id="life_expectancy_outcome">–</span></li>
              <li>School performance index: <span id="school_perf_outcome">–</span></li>
              <li>Apprenticeship starts index: <span id="apprentice_outcome">–</span></li>
            </ul>
          </div>
          <div>
            <h4>Environment & Energy</h4>
            <ul>
              <li>CO₂ emissions vs baseline: <span id="emissions_outcome">–</span></li>
              <li>Renewables share: <span id="renewables_outcome">–</span></li>
              <li>Energy price index: <span id="energy_price_outcome">–</span></li>
              <li>Air quality index: <span id="air_quality_outcome">–</span></li>
            </ul>
          </div>
          <div>
            <h4>Housing & Cost of Living</h4>
            <ul>
              <li>House price growth: <span id="house_price_outcome_adv">–</span></li>
              <li>Rent affordability: <span id="rent_afford_outcome">–</span></li>
              <li>New housing supply index: <span id="housing_supply_outcome">–</span></li>
              <li>Fuel poverty rate: <span id="fuel_poverty_outcome">–</span></li>
            </ul>
          </div>
          <div>
            <h4>International & Risks</h4>
            <ul>
              <li>Trade balance (% of GDP): <span id="trade_balance_outcome">–</span></li>
              <li>Tourism flows index: <span id="tourism_outcome">–</span></li>
              <li>Public unrest risk: <span id="unrest_outcome">–</span></li>
              <li>Brain drain risk: <span id="brain_drain_outcome">–</span></li>
            </ul>
          </div>
        </div>

        <div class="shock-summary">
          <h4>Random Event This Year</h4>
          <p id="shock_description">No simulation run yet.</p>
        </div>
      </section>
    </details>

    <div class="export-row">
      <button id="export_csv">Export CSV</button>
      <button id="print_pdf">Print / Save as PDF</button>
    </div>

    <section id="assumptions">
      <h2>Model assumptions (for context)</h2>
      <p>
        Baseline numbers roughly match the UK in 2024–25 (GDP, tax take, spending by department, and debt levels).
        The engine uses simplified Keynesian and supply-side effects to connect your budget to growth, jobs, inflation,
        and social outcomes. It’s an educational sandbox, not an official forecast.
      </p>
    </section>
  </section>
</main>

<footer>
  <p>Open-source demo for the Budget Benchmark challenge. Modify the model and UI as you wish.</p>
</footer>

<script src="app.js"></script>
</body>
</html>
